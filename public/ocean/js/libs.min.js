function social_share(e){var a=encodeURIComponent(document.title),t=encodeURIComponent(window.location.href),i=encodeURIComponent($('meta[property="og:image"]').attr("content"));if(null==i&&(i=""),"vk"==e)var o="https://vk.com/share.php?title="+a+"&description=&url="+t+"&image="+i+"&nocache-";else if("fb"==e)o="https://www.facebook.com/sharer.php?s=100&p[title]="+a+"&p[url]="+t+"&p[images][0]="+i+"&nocache-";else if("tw"==e)o="https://twitter.com/share?text="+a+"&url="+t+"&counturl="+t+"&nocache-";else if("ggl"==e)o="https://plus.google.com/share?url="+t+"&title="+a+"&imageurl="+i;else if("ok"==e)o="https://connect.ok.ru/offer?url="+t;else if("tlg"==e)o="https://telegram.me/share/url?url="+t+"&text="+a;window.open(o,"","toolbar=0,status=0,width=655,height=430")}function apBuilding(e){null==localStorage.getItem("vol")&&localStorage.setItem("vol",1),$(".js-item").removeClass("js-item-played js-item-stopped js-item-current"),$(".wplayerwplayer, .track-equalizer").remove();var a=(o=e.data()).track,t=o.artist,i=o.title,o=o.img,n=localStorage.getItem("vol");e.addClass("js-item-current js-item-stopped"),$("body").append('<div class="wplayer wplayer-init anim"><audio preload="none" controls><source src="'+a+'" /></audio></div>'),(e=$(".wplayer")).find("audio").audioPlayer(),e.find("audio").get(0).volume=n,(e=e.children(".audioplayer")).addClass("fx-row fx-middle").prepend('<div class="ap-mob-btn hidden"><span class="fal fa-info-circle"></span></div><div class="ap-desc fx-row fx-middle fx-1"><div class="ap-img img-fit"><img src="'+o+'"></div><div class="ap-info fx-1"><div class="ap-title nowrap">'+i+'</div><div class="ap-artist nowrap">'+t+"</div></div></div>").find(".audioplayer-playpause").wrap('<div class="ap-btns fx-row fx-middle"></div>'),e.find(".audioplayer-volume").before('<a href="'+a+'" class="ap-dl" download target=_blank"><span class="fal fa-arrow-circle-down"></span></a>'),e.find(".audioplayer-time-duration").wrap('<div class="ap-time fx-row"></div>'),e.find(".audioplayer-time-current").prependTo(".ap-time"),e.find(".ap-btns").append('<div class="ap-next fx-col fx-center"><span class="fas fa-forward"></span></div><div class="ap-prev fx-col fx-center fx-first"><span class="fas fa-backward"></span></div>')}function apInit(){var e=$(".js-item:first");0<e.length&&apBuilding(e)}function apPrev(){var e=$(".js-item-current").index(".js-item");apBuilding($(".js-item").eq(e-1).length?$(".js-item").eq(e-1):$(".js-item:last")),$(".audioplayer-playpause a").trigger("click")}function apNext(){var e=$(".js-item-current").index(".js-item");apBuilding($(".js-item").eq(e+1).length?$(".js-item").eq(e+1):$(".js-item:first")),$(".audioplayer-playpause a").trigger("click")}$(document).ready(function(){$("body").on("click",".js-play",function(){var e=$(this).closest(".js-item");e.hasClass("js-item-current")?$(".audioplayer-playpause a").trigger("click"):(apBuilding(e),$(".audioplayer-playpause a").trigger("click"))}),$("body").on("click",".ap-next",function(){apNext()}),$("body").on("click",".ap-prev",function(){apPrev()}),$("body").on("click",".ap-mob-btn",function(){$(".ap-desc").toggleClass("is-active"),$(this).find(".fal").toggleClass("fa-info-circle fa-times")}),$("body").on("click",".overlay-box, .login-close, .search-close, .btn-close",function(){$(".overlay-box, .login-box").fadeOut(200),$("#side-panel, .btn-close").removeClass("active"),$("body").removeClass("opened-menu")}),$("body").append('<div class="overlay-box hidden"></div><div class="side-panel" id="side-panel"></div><div class="btn-close"><span class="fal fa-times"></span></div>'),$(".to-mob").each(function(){$(this).clone().appendTo("#side-panel")}),$(".btn-menu").click(function(){$(".overlay-box").fadeIn(200),$("#side-panel, .btn-close").addClass("active"),$("body").addClass("opened-menu")}),$("#gotop").click(function(){$("html, body").animate({scrollTop:0},"slow")}),$("body").on("click","#nav-load a",function(){var e=$(this).attr("href"),a=$(this).offset().top-200;return void 0!==e&&$.ajax({url:e,beforeSend:function(){ShowLoading("")},success:function(e){$("#bottom-nav").remove(),$("#dle-content").append($("#dle-content",e).html()),$("#dle-content").after($("#bottom-nav")),$(".track-desc a, a.track-desc").addClass("wajax"),$("html, body").animate({scrollTop:a},800),HideLoading("")},error:function(){HideLoading(""),alert("что-то пошло не так")}}),!1}),$("body").on("click",".hshare > *",function(){social_share($(this).data("id"))})}),function(e,a,t){function i(e){var a=e/3600,t=Math.floor(a),i=e%3600/60,o=Math.floor(i);return 59<(e=Math.ceil(e%3600%60))&&(e=0,o=Math.ceil(i)),59<o&&(o=0,t=Math.ceil(a)),(0==t?"":0<t&&t.toString().length<2?"0"+t+":":t+":")+(o.toString().length<2?"0"+o:o)+":"+(e.toString().length<2?"0"+e:e)}function o(e){var a=t.createElement("audio");return!(!a.canPlayType||!a.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))}var n="ontouchstart"in a,s=n?"touchstart":"mousedown",l=n?"touchmove":"mousemove",d=n?"touchcancel":"mouseup";e.fn.audioPlayer=function(a){a=e.extend({classPrefix:"audioplayer",strPlay:"Играть",strPause:"Пауза",strVolume:"Громкость",strPlayI:'<span class="fas fa-play"></span>',strPauseI:'<span class="fas fa-pause"></span>',strVolumeI:'<span class="fas fa-volume-up"></span>'},a);var t,r={},u={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"};for(t in u)r[t]=a.classPrefix+"-"+u[t];return this.each(function(){if("audio"!=e(this).prop("tagName").toLowerCase())return!1;var t=e(this),u=t.attr("src"),c=""===(c=t.get(0).getAttribute("autoplay"))||"autoplay"===c,p=""===(p=t.get(0).getAttribute("loop"))||"loop"===p,m=!0;void 0===u?t.find("source").each(function(){if(void 0!==(u=e(this).attr("src"))&&o(u))return!(m=!0)}):o(u)&&(m=!0);var v,f,h,g,y,b,$,w,C,x,j=e('<div class="'+a.classPrefix+'">'+(m?e("<div>").append(t.eq(0).clone()).html():'<embed src="'+u+'" width="0" height="0" volume="100" autostart="'+c.toString()+'" loop="'+p.toString()+'" />')+'<div class="'+r.playPause+'" title="'+a.strPlay+'"><a href="#">'+a.strPauseI+"</a></div></div>"),k=(k=m?j.find("audio"):j.find("embed")).get(0);m?(j.find("audio").css({width:0,height:0,visibility:"hidden"}),j.append('<div class="'+r.time+" "+r.timeCurrent+'"></div><div class="'+r.bar+'"><div class="'+r.barLoaded+'"></div><div class="'+r.barPlayed+'"></div></div><div class="'+r.time+" "+r.timeDuration+'"></div><div class="'+r.volume+'"><div class="'+r.volumeButton+'" title="'+a.strVolume+'"><a href="#">'+a.strVolumeI+'</a></div><div class="'+r.volumeAdjust+'"><div><div></div></div></div></div>'),v=j.find("."+r.bar),f=j.find("."+r.barPlayed),h=j.find("."+r.barLoaded),g=j.find("."+r.timeCurrent),y=j.find("."+r.timeDuration),b=j.find("."+r.volumeButton),$=j.find("."+r.volumeAdjust+" > div"),w=0,C=function(e){theRealEvent=n?e.originalEvent.touches[0]:e,k.currentTime=Math.round(k.duration*(theRealEvent.pageX-v.offset().left)/v.width())},x=function(e){theRealEvent=n?e.originalEvent.touches[0]:e,k.volume=Math.abs((theRealEvent.pageY-($.offset().top+$.height()))/$.height())},p=k.volume,k.volume=.111,Math.round(1e3*k.volume)/1e3==.111?k.volume=p:j.addClass(r.noVolume),y.html("&hellip;"),g.html(i(0)),k.addEventListener("loadeddata",function(){var a;a=setInterval(function(){return k.buffered.length<1||(h.width(k.buffered.end(0)/k.duration*100+"%"),void(Math.floor(k.buffered.end(0))>=Math.floor(k.duration)&&clearInterval(a)))},100),y.html(e.isNumeric(k.duration)?i(k.duration):"&hellip;"),$.find("div").height(100*k.volume+"%"),w=k.volume}),k.addEventListener("timeupdate",function(){g.html(i(k.currentTime)),f.width(k.currentTime/k.duration*100+"%")}),k.addEventListener("volumechange",function(){$.find("div").height(100*k.volume+"%"),0<k.volume&&j.hasClass(r.muted)&&j.removeClass(r.muted),k.volume<=0&&!j.hasClass(r.muted)&&j.addClass(r.muted),localStorage.setItem("vol",k.volume)}),k.addEventListener("ended",function(){j.removeClass(r.playing).addClass(r.stopped),apNext()}),v.on(s,function(e){C(e),v.on(l,function(e){C(e)})}).on(d,function(){v.unbind(l)}),b.on("click",function(){return j.hasClass(r.muted)?(j.removeClass(r.muted),k.volume=w):(j.addClass(r.muted),w=k.volume,k.volume=0),!1}),$.on(s,function(e){x(e),$.on(l,function(e){x(e)})}).on(d,function(){$.unbind(l)})):j.addClass(r.mini),j.addClass(c?r.playing:r.stopped),j.find("."+r.playPause).on("click",function(){return e(this).parent().parent().attr("class"),j.hasClass(r.playing)?(e(this).attr("title",a.strPlay).find("a").html(a.strPlayI),j.removeClass(r.playing).addClass(r.stopped),m?k.pause():k.Stop(),e(".js-item-current").removeClass("js-item-played").addClass("js-item-stopped")):(e(this).attr("title",a.strPause).find("a").html(a.strPauseI),j.addClass(r.playing).removeClass(r.stopped),m?k.play():k.Play(),e(".js-item-current").removeClass("js-item-stopped").addClass("js-item-played"),e(".wplayer").removeClass("wplayer-init")),!1}),t.replaceWith(j)}),this}}(jQuery,window,document);
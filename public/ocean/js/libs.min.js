function docready(){$(".logo, .nav a, .track-desc a, a.track-desc, .pagi-nav a, .side-item, .speedbar a").addClass("wajax"),$(".ftext").each(function(){$(this).outerHeight()>200&&($(this).css({overflow:"hidden",height:"200px"}),$(this).after('<div class="show-text anim fx-col fx-center"><span class="fal fa-arrow-down"></span></div>'))}),$("body").on("click",".show-text",function(){$(".ftext").removeAttr("style"),$(this).remove()}),$("#dle-content > #dle-ajax-comments").appendTo($("#full-comms"))}function social_share(e){var t=encodeURIComponent(document.title),a=encodeURIComponent(window.location.href),n=encodeURIComponent($('meta[property="og:image"]').attr("content"));if(null==n&&(n=""),"vk"==e)var i="https://vk.com/share.php?title="+t+"&description=&url="+a+"&image="+n+"&nocache-";else if("fb"==e)i="https://www.facebook.com/sharer.php?s=100&p[title]="+t+"&p[url]="+a+"&p[images][0]="+n+"&nocache-";else if("tw"==e)i="https://twitter.com/share?text="+t+"&url="+a+"&counturl="+a+"&nocache-";else if("ggl"==e)i="https://plus.google.com/share?url="+a+"&title="+t+"&imageurl="+n;else if("ok"==e)i="https://connect.ok.ru/offer?url="+a;else if("tlg"==e)i="https://telegram.me/share/url?url="+a+"&text="+t;window.open(i,"","toolbar=0,status=0,width=655,height=430")}function apBuilding(e){null==localStorage.getItem("vol")&&localStorage.setItem("vol",1),$(".js-item").removeClass("js-item-played js-item-stopped js-item-current"),$(".wplayer, .track-equalizer").remove();var t=(i=e.data()).track,a=i.artist,n=i.title,i=i.img,o=localStorage.getItem("vol");e.addClass("js-item-current js-item-stopped"),$("body").append('<div class="wplayer wplayer-init anim"><audio preload="none" controls><source src="'+t+'" /></audio></div>'),(e=$(".wplayer")).find("audio").audioPlayer(),e.find("audio").get(0).volume=o,(e=e.children(".audioplayer")).addClass("fx-row fx-middle").prepend('<div class="ap-mob-btn hidden"><span class="fal fa-info-circle"></span></div><div class="ap-desc fx-row fx-middle fx-1"><div class="ap-img img-fit"><img src="'+i+'"></div><div class="ap-info fx-1"><div class="ap-title nowrap">'+n+'</div><div class="ap-artist nowrap">'+a+"</div></div></div>").find(".audioplayer-playpause").wrap('<div class="ap-btns fx-row fx-middle"></div>'),e.find(".audioplayer-volume").before('<a href="'+t+'" class="ap-dl" download target=_blank"><span class="fal fa-arrow-circle-down"></span></a>'),e.find(".audioplayer-time-duration").wrap('<div class="ap-time fx-row"></div>'),e.find(".audioplayer-time-current").prependTo(".ap-time"),e.find(".ap-btns").append('<div class="ap-next fx-col fx-center"><span class="fas fa-forward"></span></div><div class="ap-prev fx-col fx-center fx-first"><span class="fas fa-backward"></span></div>')}function apInit(){var e=$(".js-item:first");0<e.length&&apBuilding(e)}function apPrev(){var e=$(".js-item-current").index(".js-item");apBuilding($(".js-item").eq(e-1).length?$(".js-item").eq(e-1):$(".js-item:last")),$(".audioplayer-playpause a").trigger("click")}function apNext(){var e=$(".js-item-current").index(".js-item");apBuilding($(".js-item").eq(e+1).length?$(".js-item").eq(e+1):$(".js-item:first")),$(".audioplayer-playpause a").trigger("click")}$(document).ready(function(){docready(),$(document).pjax(".wajax","#wajax",{fragment:"#wajax",push:!0,replace:!1,timeout:3e4,scrollTo:0}),$(document).on("pjax:send",function(){ShowLoading(""),$(".login-box, .overlay-box").fadeOut(200),$("#side-panel, .btn-close").removeClass("active"),$("body").removeClass("opened-menu")}),$(document).on("pjax:success",function(){docready(),HideLoading("")}),$(document).on("pjax:error",function(){HideLoading(""),alert("Что-то пошло не так")}),apInit(),$("body").on("click",".js-play",function(){var e=$(this).closest(".js-item");e.hasClass("js-item-current")?$(".audioplayer-playpause a").trigger("click"):(apBuilding(e),$(".audioplayer-playpause a").trigger("click"))}),$("body").on("click",".ap-next",function(){apNext()}),$("body").on("click",".ap-prev",function(){apPrev()}),$("body").on("click",".ap-mob-btn",function(){$(".ap-desc").toggleClass("is-active"),$(this).find(".fal").toggleClass("fa-info-circle fa-times")}),$("body").on("click",".overlay-box, .login-close, .search-close, .btn-close",function(){$(".overlay-box, .login-box").fadeOut(200),$("#side-panel, .btn-close").removeClass("active"),$("body").removeClass("opened-menu")}),$("body").append('<div class="overlay-box hidden"></div><div class="side-panel" id="side-panel"></div><div class="btn-close"><span class="fal fa-times"></span></div>'),$(".to-mob").each(function(){$(this).clone().appendTo("#side-panel")}),$(".btn-menu").click(function(){$(".overlay-box").fadeIn(200),$("#side-panel, .btn-close").addClass("active"),$("body").addClass("opened-menu")}),$("#gotop").click(function(){$("html, body").animate({scrollTop:0},"slow")}),$("body").on("click","#nav-load a",function(){var e=$(this).attr("href"),t=$(this).offset().top-200;return void 0!==e&&$.ajax({url:e,beforeSend:function(){ShowLoading("")},success:function(e){$("#bottom-nav").remove(),$("#dle-content").append($("#dle-content",e).html()),$("#dle-content").after($("#bottom-nav")),$(".track-desc a, a.track-desc").addClass("wajax"),$("html, body").animate({scrollTop:t},800),HideLoading("")},error:function(){HideLoading(""),alert("что-то пошло не так")}}),!1}),$("body").on("click",".hshare > *",function(){social_share($(this).data("id"))})}),function(e,t,a){function n(e){var t=e/3600,a=Math.floor(t),n=e%3600/60,i=Math.floor(n);return 59<(e=Math.ceil(e%3600%60))&&(e=0,i=Math.ceil(n)),59<i&&(i=0,a=Math.ceil(t)),(0==a?"":0<a&&a.toString().length<2?"0"+a+":":a+":")+(i.toString().length<2?"0"+i:i)+":"+(e.toString().length<2?"0"+e:e)}function i(e){var t=a.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))}var o="ontouchstart"in t,r=o?"touchstart":"mousedown",s=o?"touchmove":"mousemove",l=o?"touchcancel":"mouseup";e.fn.audioPlayer=function(t){t=e.extend({classPrefix:"audioplayer",strPlay:"Играть",strPause:"Пауза",strVolume:"Громкость",strPlayI:'<span class="fas fa-play"></span>',strPauseI:'<span class="fas fa-pause"></span>',strVolumeI:'<span class="fas fa-volume-up"></span>'},t);var a,d={},c={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"};for(a in c)d[a]=t.classPrefix+"-"+c[a];return this.each(function(){if("audio"!=e(this).prop("tagName").toLowerCase())return!1;var a=e(this),c=a.attr("src"),u=""===(u=a.get(0).getAttribute("autoplay"))||"autoplay"===u,p=""===(p=a.get(0).getAttribute("loop"))||"loop"===p,f=!0;void 0===c?a.find("source").each(function(){if(void 0!==(c=e(this).attr("src"))&&i(c))return!(f=!0)}):i(c)&&(f=!0);var m,v,h,g,y,x,w,b,j,$,C=e('<div class="'+t.classPrefix+'">'+(f?e("<div>").append(a.eq(0).clone()).html():'<embed src="'+c+'" width="0" height="0" volume="100" autostart="'+u.toString()+'" loop="'+p.toString()+'" />')+'<div class="'+d.playPause+'" title="'+t.strPlay+'"><a href="#">'+t.strPauseI+"</a></div></div>"),P=(P=f?C.find("audio"):C.find("embed")).get(0);f?(C.find("audio").css({width:0,height:0,visibility:"hidden"}),C.append('<div class="'+d.time+" "+d.timeCurrent+'"></div><div class="'+d.bar+'"><div class="'+d.barLoaded+'"></div><div class="'+d.barPlayed+'"></div></div><div class="'+d.time+" "+d.timeDuration+'"></div><div class="'+d.volume+'"><div class="'+d.volumeButton+'" title="'+t.strVolume+'"><a href="#">'+t.strVolumeI+'</a></div><div class="'+d.volumeAdjust+'"><div><div></div></div></div></div>'),m=C.find("."+d.bar),v=C.find("."+d.barPlayed),h=C.find("."+d.barLoaded),g=C.find("."+d.timeCurrent),y=C.find("."+d.timeDuration),x=C.find("."+d.volumeButton),w=C.find("."+d.volumeAdjust+" > div"),b=0,j=function(e){theRealEvent=o?e.originalEvent.touches[0]:e,P.currentTime=Math.round(P.duration*(theRealEvent.pageX-m.offset().left)/m.width())},$=function(e){theRealEvent=o?e.originalEvent.touches[0]:e,P.volume=Math.abs((theRealEvent.pageY-(w.offset().top+w.height()))/w.height())},p=P.volume,P.volume=.111,Math.round(1e3*P.volume)/1e3==.111?P.volume=p:C.addClass(d.noVolume),y.html("&hellip;"),g.html(n(0)),P.addEventListener("loadeddata",function(){var t;t=setInterval(function(){return P.buffered.length<1||(h.width(P.buffered.end(0)/P.duration*100+"%"),void(Math.floor(P.buffered.end(0))>=Math.floor(P.duration)&&clearInterval(t)))},100),y.html(e.isNumeric(P.duration)?n(P.duration):"&hellip;"),w.find("div").height(100*P.volume+"%"),b=P.volume}),P.addEventListener("timeupdate",function(){g.html(n(P.currentTime)),v.width(P.currentTime/P.duration*100+"%")}),P.addEventListener("volumechange",function(){w.find("div").height(100*P.volume+"%"),0<P.volume&&C.hasClass(d.muted)&&C.removeClass(d.muted),P.volume<=0&&!C.hasClass(d.muted)&&C.addClass(d.muted),localStorage.setItem("vol",P.volume)}),P.addEventListener("ended",function(){C.removeClass(d.playing).addClass(d.stopped),apNext()}),m.on(r,function(e){j(e),m.on(s,function(e){j(e)})}).on(l,function(){m.unbind(s)}),x.on("click",function(){return C.hasClass(d.muted)?(C.removeClass(d.muted),P.volume=b):(C.addClass(d.muted),b=P.volume,P.volume=0),!1}),w.on(r,function(e){$(e),w.on(s,function(e){$(e)})}).on(l,function(){w.unbind(s)})):C.addClass(d.mini),C.addClass(u?d.playing:d.stopped),C.find("."+d.playPause).on("click",function(){return e(this).parent().parent().attr("class"),C.hasClass(d.playing)?(e(this).attr("title",t.strPlay).find("a").html(t.strPlayI),C.removeClass(d.playing).addClass(d.stopped),f?P.pause():P.Stop(),e(".js-item-current").removeClass("js-item-played").addClass("js-item-stopped")):(e(this).attr("title",t.strPause).find("a").html(t.strPauseI),C.addClass(d.playing).removeClass(d.stopped),f?P.play():P.Play(),e(".js-item-current").removeClass("js-item-stopped").addClass("js-item-played"),e(".wplayer").removeClass("wplayer-init")),!1}),a.replaceWith(C)}),this}}(jQuery,window,document),function(e){function t(t,n,i){return i=y(n,i),this.on("click.pjax",t,function(t){var n=i;n.container||((n=e.extend({},i)).container=e(this).attr("data-pjax")),a(t,n)})}function a(t,a,n){n=y(a,n);var o=t.currentTarget,r=e(o);if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==o.protocol||location.hostname!==o.hostname||-1<o.href.indexOf("#")&&g(o)==g(location)||t.isDefaultPrevented())){var s={url:o.href,container:r.attr("data-pjax"),target:o},l=e.extend({},s,n),d=e.Event("pjax:click");r.trigger(d,[l]),d.isDefaultPrevented()||(i(l),t.preventDefault(),r.trigger("pjax:clicked",[l]))}}function n(t,a,n){n=y(a,n);var o=t.currentTarget,r=e(o);if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:o};if("GET"!==s.type&&void 0!==window.FormData)s.data=new FormData(o),s.processData=!1,s.contentType=!1;else{if(r.find(":file").length)return;s.data=r.serializeArray()}i(e.extend({},s,n)),t.preventDefault()}function i(t){t=e.extend(!0,{},e.ajaxSettings,i.defaults,t),e.isFunction(t.url)&&(t.url=t.url());var a=h(t.url).hash,n=e.type(t.container);if("string"!==n)throw"expected string value for 'container' option; got "+n;var o,s=t.context=e(t.container);if(!s.length)throw"the container selector '"+t.container+"' did not match anything";function l(a,n,i){(i=i||{}).relatedTarget=t.target;var o=e.Event(a,i);return s.trigger(o,n),!o.isDefaultPrevented()}t.data||(t.data={}),e.isArray(t.data)?t.data.push({name:"_pjax",value:t.container}):t.data._pjax=t.container,t.beforeSend=function(e,n){if("GET"!==n.type&&(n.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",t.container),!l("pjax:beforeSend",[e,n]))return!1;0<n.timeout&&(o=setTimeout(function(){l("pjax:timeout",[e,t])&&e.abort("timeout")},n.timeout),n.timeout=0);var i=h(n.url);a&&(i.hash=a),t.requestUrl=v(i)},t.complete=function(e,a){o&&clearTimeout(o),l("pjax:complete",[e,a,t]),l("pjax:end",[e,t])},t.error=function(e,a,n){var i=b("",e,t),o=l("pjax:error",[e,a,n,t]);"GET"==t.type&&"abort"!==a&&o&&r(i.url)},t.success=function(n,o,d){var c=i.state,u="function"==typeof e.pjax.defaults.version?e.pjax.defaults.version():e.pjax.defaults.version,p=d.getResponseHeader("X-PJAX-Version"),m=b(n,d,t),v=h(m.url);if(a&&(v.hash=a,m.url=v.href),u&&p&&u!==p)r(m.url);else if(m.contents){if(i.state={id:t.id||f(),url:m.url,title:m.title,container:t.container,fragment:t.fragment,timeout:t.timeout},(t.push||t.replace)&&window.history.replaceState(i.state,m.title,m.url),e.contains(s,document.activeElement))try{document.activeElement.blur()}catch(n){}m.title&&(document.title=m.title),l("pjax:beforeReplace",[m.contents,t],{state:i.state,previousState:c}),s.html(m.contents);var g=s.find("input[autofocus], textarea[autofocus]").last()[0];g&&document.activeElement!==g&&g.focus(),function(t){if(t){var a=e("script[src]");t.each(function(){var t=this.src;if(!a.filter(function(){return this.src===t}).length){var n=document.createElement("script"),i=e(this).attr("type");i&&(n.type=i),n.src=e(this).attr("src"),document.head.appendChild(n)}})}}(m.scripts);var y=t.scrollTo;if(a){var x=decodeURIComponent(a.slice(1)),w=document.getElementById(x)||document.getElementsByName(x)[0];w&&(y=e(w).offset().top)}"number"==typeof y&&e(window).scrollTop(y),l("pjax:success",[n,o,d,t])}else r(m.url)},i.state||(i.state={id:f(),url:window.location.href,title:document.title,container:t.container,fragment:t.fragment,timeout:t.timeout},window.history.replaceState(i.state,document.title)),p(i.xhr),i.options=t;var d,c,u=i.xhr=e.ajax(t);return 0<u.readyState&&(t.push&&!t.replace&&(d=i.state.id,c=[t.container,m(s)],j[d]=c,C.push(d),P($,0),P(C,i.defaults.maxCacheLength),window.history.pushState(null,"",t.requestUrl)),l("pjax:start",[u,t]),l("pjax:send",[u,t])),i.xhr}function o(t,a){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return i(e.extend(n,y(t,a)))}function r(e){window.history.replaceState(null,"",i.state.url),window.location.replace(e)}var s=!0,l=window.location.href,d=window.history.state;function c(t){s||p(i.xhr);var a,n=i.state,o=t.state;if(o&&o.container){if(s&&l==o.url)return;if(n){if(n.id===o.id)return;a=n.id<o.id?"forward":"back"}var d=j[o.id]||[],c=d[0]||o.container,u=e(c),f=d[1];if(u.length){n&&function(e,t,a){var n,o;j[t]=a,o="forward"===e?(n=C,$):(n=$,C),n.push(t),(t=o.pop())&&delete j[t],P(n,i.defaults.maxCacheLength)}(a,n.id,[c,m(u)]);var v=e.Event("pjax:popstate",{state:o,direction:a});u.trigger(v);var h={id:o.id,url:o.url,container:c,push:!1,fragment:o.fragment,timeout:o.timeout,scrollTo:!1};if(f){u.trigger("pjax:start",[null,h]),(i.state=o).title&&(document.title=o.title);var g=e.Event("pjax:beforeReplace",{state:o,previousState:n});u.trigger(g,[f,h]),u.html(f),u.trigger("pjax:end",[null,h])}else i(h);u[0].offsetHeight}else r(location.href)}s=!1}function u(t){var a=e.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",i=e("<form>",{method:"GET"===n?"GET":"POST",action:a,style:"display:none"});"GET"!==n&&"POST"!==n&&i.append(e("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var o=t.data;if("string"==typeof o)e.each(o.split("&"),function(t,a){var n=a.split("=");i.append(e("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(e.isArray(o))e.each(o,function(t,a){i.append(e("<input>",{type:"hidden",name:a.name,value:a.value}))});else if("object"==typeof o){var r;for(r in o)i.append(e("<input>",{type:"hidden",name:r,value:o[r]}))}e(document.body).append(i),i.submit()}function p(t){t&&t.readyState<4&&(t.onreadystatechange=e.noop,t.abort())}function f(){return(new Date).getTime()}function m(t){var a=t.clone();return a.find("script").each(function(){this.src||e._data(this,"globalEval",!1)}),a.contents()}function v(e){return e.search=e.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),e.href.replace(/\?($|#)/,"$1")}function h(e){var t=document.createElement("a");return t.href=e,t}function g(e){return e.href.replace(/#.*/,"")}function y(t,a){return t&&a?((a=e.extend({},a)).container=t,a):e.isPlainObject(t)?t:{container:t}}function x(e,t){return e.filter(t).add(e.find(t))}function w(t){return e.parseHTML(t,document,!0)}function b(t,a,n){var i,o,r={},s=/<html/i.test(t),l=a.getResponseHeader("X-PJAX-URL");if(r.url=l?v(h(l)):n.requestUrl,s){o=e(w(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var d=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i);i=null!=d?e(w(d[0])):o}else i=o=e(w(t));if(0===o.length)return r;if(r.title=x(i,"title").last().text(),n.fragment){var c=o;"body"!==n.fragment&&(c=x(c,n.fragment).first()),c.length&&(r.contents="body"===n.fragment?c:c.contents(),r.title||(r.title=c.attr("title")||c.data("title")))}else s||(r.contents=o);return r.contents&&(r.contents=r.contents.not(function(){return e(this).is("title")}),r.contents.find("title").remove(),r.scripts=x(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=e.trim(r.title)),r}d&&d.container&&(i.state=d),"state"in window.history&&(s=!1);var j={},$=[],C=[];function P(e,t){for(;e.length>t;)delete j[e.shift()]}function k(){return e("meta").filter(function(){var t=e(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function T(){e.fn.pjax=t,e.pjax=i,e.pjax.enable=e.noop,e.pjax.disable=E,e.pjax.click=a,e.pjax.submit=n,e.pjax.reload=o,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:k},e(window).on("popstate.pjax",c)}function E(){e.fn.pjax=function(){return this},e.pjax=u,e.pjax.enable=T,e.pjax.disable=e.noop,e.pjax.click=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e(window).off("popstate.pjax",c)}e.event.props&&e.inArray("state",e.event.props)<0?e.event.props.push("state"):"state"in e.Event.prototype||e.event.addProp("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(e.support.pjax?T:E)()}(jQuery);